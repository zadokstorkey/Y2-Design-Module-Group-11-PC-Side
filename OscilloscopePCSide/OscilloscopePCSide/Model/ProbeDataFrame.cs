using GalaSoft.MvvmLight;
using OscilloscopePCSide.Services;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace OscilloscopePCSide.Model
{
    public class ProbeDataFrame : ObservableObject
    {
        private readonly DateTime _timestamp;

        private readonly List<int> _heights;

        public DateTime Timestamp
        { 
            get
            {
                return _timestamp;
            }
        }

        public List<int> Heights
        {
            get
            {
                return _heights;
            }
        }

        public ProbeDataFrame(DateTime timestamp, List<int> heights)
        {
            this._timestamp = timestamp;
            this._heights = heights;

            var rnd = new Random();

            //temp test data
            //for (var i = 0; i < 256; i++)
            //{
            //    this._heights.Add(rnd.Next(-4096, 4096));
            //}

            //also temp test data
            this._heights = new ProbeDataParsingService().ParseProbeData("1779|1313|930|647|431|278|190|131|81|52|42|31|12|16|18|11|5|7|2|2|10|11|1|0|9|5|0|8|11|0|6|13|3|0|10|11|1|0|8|7|2|10|11|1|3|0|0|5|7|2|2|10|11|1|0|8|7|2|10|11|1|2|8|6|9|9|3|0|8|10|7|2|10|7|2|10|11|1|4|7|0|4|12|12|10|15|8|6|10|14|9|5|6|8|7|6|9|0|6|13|5|0|10|10|6|10|14|10|10|15|7|0|6|11|1|0|9|4|4|12|12|8|9|9|0|5|7|2|2|10|10|7|2|10|6|9|10|11|0|7|5|0|4|11|3|0|8|8|8|15|7|0|7|3|0|2|10|9|4|12|13|2|8|12|8|11|9|3|0|8|10|5|3|4|9|0|10|12|8|11|9|0|5|6|9|1|4|7|0|4|12|11|3|4|9|1|0|8|6|8|15|7|0|7|3|0|2|11|5|0|8|10|7|3|4|4|7|6|8|7|5|3|0|3|3|0|1|4|8|6|8|14|11|4|12|13|2|11|5|0|4|11|3|0|9|5|0|5|5|0|4|11|6|5|6|8|7|2|11|1|0|9|4|4|10|14|8|11|9|3|0|8|9|1|0|8|6|9|9|3|0|7|3|0|3|3|0|2|10|12|8|11|8|6|8|16|14|9|10|11|1|0|9|3|0|8|10|6|9|9|0|4|13|7|0|8|10|7|2|11|3|0|7|3|0|3|3|0|3|4|7|0|8|10|7|2|11|0|5|7|2|2|10|10|7|2|11|0|6|12|13|3|4|8|6|8|15|3|0|9|4|4|12|12|8|11|4|12|11|2|10|11|0|6|12|7|3|3|0|1|2|7|0|3|4|8|6|12|13|2|7|5|0|3|4|7|0|6|11|1|0|9|4|3|3|1|0|2|10|9|2|11|4|4|8|13|3|0|8|11|0|10|10|6|10|15|2|7|6|8|6|12|13|2|7|6|6|7|5|2|2|7|4|3|0|9|5|0|8|10|6|8|15|4|7|7|1|0|5|4|3|0|9|4|5|5|1|0|2|10|6|8|15|7|0|9|4|3|1|3|0|3|4|8|6|12|13|3|0|8|7|2|10|11|0|9|5|0|4|11|4|5|5|2|2|5|7|0|3|4|7|0|7|3|0|3|3|0|1|4|8|5|2|10|7|2|10|11|1|0|8|5|3|4|7|0|7|4|3|0|9|4|5|6|8|7|2|10|6|8|15|6|4|12|13|2|6|12|12|9|9|4|3|0|9|1|0|8|10|7|5|2|2|6|12|11|2|10|11|0|5|6|4|7|7|1|0|2|10|11|0|11|4|4|7|6|8|6|13|7|0|3|4|4|7|6|8|6|11|6|4|7|6|8|6|13|7|0|4|12|8|10|14|14|8|13|8|6|8|15|7|0|7|4|3|0|9|1|0|8|9|2|10|10|7|2|10|7|2|10|11|0|10|10|7|3|3|0|3|3|0|0|9|4|4|7|6|4|8|14|14|8|14|14|8|11|9|3|0|8|10|7|3|2|1|0|9|6|4|12|12|8|11|8|5|3|5|2|0|10|11|0|6|12|13|3|4|8|6|9|9|0|5|6|8|6|14|14|7|1|5|0|3|4|8|7|4|10|7|3|4|7|0|9|4|3|1|3|0|3|3|0|1|3|0|2|6|11|1|0|10|10|7|7|1|0|3|3|0|3|3|0|1|4|7|0|5|5|0|4|11|7|0|8|10|7|2|10|8|10|15|8|5|7|2|1|0|9|2|6|11|7|0|7|3|0|3|4|6|7|5|3|0|5|4|8|6|9|10|11|0|7|5|0|4|11|6|4|12|13|2|8|14|9|5|7|2|2|10|12|8|10|16|11|5|7|1|0|7|3|0|3|4|4|7|7|2|3|3|0|1|0|8|10|8|14|13|4|7|6|4|8|15|7|0|8|10|7|2|10|7|3|3|0|1|3|0|1|0|8|7|3|3|0|1|1|2|2|6|12|13|3|5|3|0|3|5|0|4|12|13|3|4|9|1|0|9|2|6|12|14|9|6|13|3|0|10|9|4|12|13|3|2|8|6|10|16|13|7|6|10|6|10|14|10|11|9|4|6|12|13|3|2|8|6|9|10|9|4|11|7|0|7|4|4|8|14|10|11|9|5|0|6|11|1|0|9|2|6|13|8|6|11|8|7|3|4|8|6|15|7|0|5|6|5|2|11|2|6|12|13|3|3|1|0|3|4|6|7|6|10|7|6|9|1|0|9|2|6|13|7|0|8|11|1|0|10|9|4|12|13|4|10|13|4|13|7|0|9|6|5|2|12|13|4|12|13|3|0|9|1|0|9|5|0|9|5|0|5|6|5|3|4|8|7|7|2|2|7|5|0|5|7|2|3|3|0|2|6|13|3|1|5|1|0|7|2|3|0|10|8|10|15|7|0|10|11|1|0|9|1|0|10|11|0|8|12|9|4|13|7|0|9|5|0|5|6|5|2|11|5|0|10|12|9|6|13|4|8|14|14|10|15|7|0|4|12|10|11|10|11|1|4|9|1|0|9|3|0|8|11|1|0|9|1|0|10|11|2|11|5|0|4|12|10|11|9|5|0|5|5|0|5|7|1|0|7|3|0|4|12|12|10|15|7|0|5|5|0|6|12|13|3|5|3|0|4|11|1|1|4|8|6|13|9|0|6|13|7|0|10|12|8|10|16|11|4|14|14|10|13|10|8|11|9|4|3|6|10|7|3|4|5|2|11|6|4|9|8|7|2|11|5|0|9|4|5|2|11|3|0|9|5|0|6|8|15|7|0|6|11|2|6|13|7|0|9|6|4|8|15|4|8|15|7|0|8|12|7|2|12|11|3|4|8|7|3|4|4|8|14|15|3|4|9|1|0|10|9|4|12|13|3|1|3|0|3|4|8|7|7|2|2|7|7|2|3|5|2|3|0|9|1|0|9|6|4|10|14|10|11|10|11|1|5|2|4|8|15|3|1|4|8|5|6|11|1|0|10|11|2|9|6|6|8|14|10|12|18|16|11|10|11|1|0|10|8|10|14|13|4|10|14|10|11|9|5|0|9|5|0|5|6|5|3|4|9|0|10|12|8|11|9|2|6|13|7|0|8|11|1|0|10|8|10|15|7|0|6|11|1|1|3|0|2|10|11|1|0|10|11|1|5|3|0|3|4|5|2|11|5|0|6|11|2|6|14|14|8|14|15|3|0|10|11|2|10|11|1|1|3|0|2|11|5|0|5|7|0|4|13|7|0|8|11|1|0|10|11|2|11|5|0|6|12|10|12|18|17|5|3|4|5|2|11|5|0|9|5|0|5|7|0|4|13|7|0|5|6|6|8|16|15|3|3|1|0|3|5|2|3|5|2|2|6|14|13|5|6|9|2|6|13|4|9|9|6|4|9|9|0|7|7|2|2|10|11|1|0|10|11|1|5|3|0|4|11|2|7|7|2|3|2|9|1|0|10|11|1|5|3|0|3|4|6|8|15|7|0|6|13|3|1|4|8|7|5|4|5|2|12|12|10|16|15|5|3|3|0|4|12|13|3|5|2|3|0|10|7|3|3|1|0|6|10|7|2|12|10|11|10|11|0|8|12|10|12|17|10|9|10|11|1|1|3|0|3|5|3|0|7|3|0|3|5|0|5|7|3|0|5|6|4|8|15|8|7|7|2|3|0|9|2|7|7|3|0|4|11|2|6|14|14|9|8|12|9|5|7|3|0|7|3|0|4|12|12|11|9|5|0|5|6|6|7|7|2|3|4|9|1|1|3|0|3|1|0|9|2|7|6|9|2|9|7|0|5|7|2|3|4|9|1|0|9|1|0|10|11|1|3|1|0|3|5|1|0|9|5|0|7|5|0|5|7|1|0|8|11|1|2|10|7|3|4|9|2|11|6|5|3|3|0|4|12|13|3|3|1|0|4|12|12|10|16|16|11|6|13|4|8|15|7|0|7|5|0|5|7|2|3|3|1|0|3|5|2|5|6|9|3|1|3|0|4|12|13|3|6|8|7|3|5|0|5|7|2|3|4|8|7|3|4|5|1|6|9|2|11|5|0|5|7|0|5|7|3|0|4|11|2|7|7|1|0|9|4|5|5|4|4|8|15|7|0|10|12|8|12|16|12|14|18|18|12|17|11|1|0|10|9|5|6|9|3|4|9|2|6|13|5|2|11|5|0|9|6|5|3|4|5|2|12|13|3|5|3|0|3|5|0|6|13|8|7|7|3|0|3|5|0|5|8|11|1|5|2|3|0|9|2|7|7|2|3|0|6|12|10|12|17|11|1|3|2|2|6|14|12|11|");
        }
    }
}
