using GalaSoft.MvvmLight;
using OscilloscopePCSide.Services;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace OscilloscopePCSide.Model
{
    public class ProbeDataFrame : ObservableObject
    {
        private readonly DateTime _timestamp;

        private readonly List<int> _heights;

        public DateTime Timestamp
        { 
            get
            {
                return _timestamp;
            }
        }

        public List<int> Heights
        {
            get
            {
                return _heights;
            }
        }

        public ProbeDataFrame(DateTime timestamp, List<int> heights)
        {
            this._timestamp = timestamp;
            this._heights = heights;

            var rnd = new Random();

            //temp test data
            //for (var i = 0; i < 256; i++)
            //{
            //    this._heights.Add(rnd.Next(-4096, 4096));
            //}

            //also temp test data
            this._heights = new ProbeDataParsingService().ParseProbeData("|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|7|0|20|38|26|61|0|67|75|79|5|84|108|125|147|149|176|196|112|210|177|237|266|214|195|257|258|281|293|259|307|330|326|320|323|340|394|341|341|361|388|394|416|384|438|421|427|459|434|437|472|423|475|477|493|531|467|500|527|502|531|527|555|548|546|545|559|577|549|566|554|564|557|549|567|607|608|548|627|535|510|604|606|553|607|592|586|622|567|663|607|667|584|607|610|608|581|596|599|572|596|587|516|620|585|561|588|578|552|589|546|582|571|560|552|563|529|564|545|533|518|527|502|504|523|491|534|493|460|482|463|466|482|469|454|428|430|423|420|415|437|384|382|360|342|341|342|358|317|338|278|269|295|255|270|256|235|217|224|204|194|176|151|162|148|122|165|124|104|62|78|69|69|48|55|38|27|6|14|24|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|11|104|47|35|51|54|77|58|91|123|124|150|133|102|162|117|167|171|185|232|235|254|234|268|230|259|282|300|312|316|322|333|338|343|320|364|338|444|370|369|411|395|395|429|343|436|460|458|446|474|480|455|485|483|506|503|504|534|535|504|519|554|550|537|558|545|594|556|569|596|593|595|599|622|579|589|599|623|598|592|583|611|591|631|628|633|592|604|515|598|593|602|596|630|620|613|579|599|645|585|604|514|606|600|608|559|581|608|554|564|551|586|563|523|543|540|524|533|511|514|511|661|522|530|474|491|501|455|443|443|459|485|421|417|421|424|409|391|367|382|376|355|355|344|336|326|326|311|307|296|293|284|267|237|270|249|214|231|226|214|200|164|144|150|141|110|120|99|85|96|76|52|71|46|62|37|20|3|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|13|8|0|24|49|68|47|63|75|102|71|123|123|183|157|182|151|223|215|203|208|216|221|228|246|316|262|271|246|297|288|326|180|303|374|361|369|386|383|394|412|399|467|415|435|476|439|424|282|459|470|489|472|482|503|514|494|555|508|530|545|533|582|495|540|544|560|561|548|561|573|579|552|570|544|624|585|595|577|620|611|595|595|593|593|606|599|609|596|516|603|578|594|643|606|619|602|617|619|605|587|552|597|597|565|612|557|568|587|567|560|583|553|552|552|522|545|522|531|539|555|527|508|490|499|502|485|450|470|449|455|443|419|454|445|323|422|415|381|379|364|364|376|355|343|339|297|316|332|289|284|284|245|366|253|243|227|227|207|196|203|162|177|145|134|124|147|138|116|76|78|77|54|49|45|31|40|13|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|1|19|8|20|55|62|69|87|107|114|82|144|137|140|148|148|156|183|227|203|234|202|233|276|219|296|280|267|260|304|323|315|315|342|334|367|370|368|381|348|387|403|436|403|439|413|448|459|471|471|507|480|477|522|476|517|536|522|520|524|526|541|554|553|554|539|566|560|583|530|563|593|588|561|526|585|587|612|592|597|669|623|591|625|649|496|623|593|613|625|605|610|596|579|627|597|588|597|606|621|626|589|599|608|549|577|586|578|586|547|578|530|564|540|542|534|500|529|503|507|510|509|522|512|512|501|472|462|493|445|459|422|395|439|427|418|414|412|390|382|359|350|359|341|343|356|321|338|311|301|338|275|260|246|246|226|262|227|209|195|146|219|167|154|144|114|133|111|75|107|109|46|67|64|32|0|7|6|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|10|18|7|49|37|31|71|76|90|125|96|114|141|116|140|145|175|193|199|190|220|213|241|267|276|255|289|289|270|287|304|323|333|328|326|355|348|348|371|383|413|409|405|428|402|448|450|435|420|451|441|487|458|479|483|501|497|534|508|531|535|540|521|573|549|504|601|551|550|570|562|574|587|595|600|584|579|582|642|562|628|585|622|626|615|611|638|610|613|585|613|618|619|576|610|606|623|610|593|629|603|591|607|550|528|593|569|566|567|565|543|583|571|540|531|551|541|553|526|516|519|485|531|505|481|490|465|474|491|461|421|441|437|479|423|409|414|407|371|470|372|384|388|355|359|344|355|311|310|298|301|272|241|263|274|257|232|222|238|190|200|170|160|164|154|133|112|136|109|98|84|72|57|44|45|34|27|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0");
            //this._heights = new ProbeDataParsingService().ParseProbeData("|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|1|49|88|114|172|192|224|266|184|282|287|273|321|282|286|330|304|311|314|303|309|299|294|306|271|305|309|299|314|324|262|306|314|280|309|282|292|298|290|295|304|321|306|327|287|312|305|289|294|296|323|310|311|295|306|299|296|318|303|275|276|299|300|296|308|309|312|307|303|304|293|341|269|289|334|336|320|311|311|321|322|302|329|271|311|310|330|308|351|279|312|319|300|311|299|313|295|393|307|314|304|293|321|296|316|301|282|305|302|354|309|307|301|295|287|302|357|283|340|304|304|307|305|317|303|303|310|312|303|312|309|307|301|328|302|338|314|323|309|288|296|332|310|293|319|296|337|351|272|302|299|283|291|290|310|247|268|279|287|304|288|328|338|261|295|266|295|287|303|316|308|299|287|269|296|315|240|256|210|188|141|166|111|81|35|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|39|64|83|128|171|222|207|249|268|268|323|320|293|299|295|289|323|297|303|308|285|304|304|293|286|265|289|275|299|291|316|262|297|286|280|272|308|288|284|302|268|337|315|325|296|304|328|309|290|310|319|286|314|300|305|333|294|311|324|398|291|308|320|303|322|291|305|309|309|322|312|307|334|294|287|306|307|311|297|288|309|319|318|311|290|312|311|308|313|301|283|285|297|294|263|301|289|299|299|294|303|306|299|318|321|326|299|306|294|330|290|282|311|312|300|317|305|283|301|323|337|311|282|295|297|275|344|294|328|330|319|329|322|291|320|290|304|323|285|283|304|292|321|301|305|306|293|288|303|270|295|298|293|268|287|270|283|192|279|307|279|291|275|299|317|304|296|310|377|298|252|326|158|283|266|266|205|245|215|204|162|105|96|3|1|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|42|77|139|143|266|199|240|153|273|281|294|321|282|267|307|231|307|294|302|309|210|314|293|298|314|296|280|296|321|300|302|317|283|306|293|289|360|290|276|250|309|311|318|286|309|280|291|308|396|314|306|309|305|265|300|300|335|303|341|293|257|311|306|274|292|342|333|327|310|343|311|324|327|285|334|283|296|288|315|306|359|305|309|317|302|313|328|322|308|320|282|318|307|315|321|282|279|294|331|306|300|307|304|315|269|271|306|304|299|293|343|310|299|296|314|302|293|302|294|322|307|309|315|316|306|324|308|307|308|298|330|324|304|345|315|313|309|308|317|294|291|291|307|295|323|299|265|302|314|319|306|293|308|303|280|295|305|275|284|283|249|307|283|271|295|285|296|305|289|312|302|290|277|289|265|289|218|237|219|207|142|118|69|35|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|25|58|120|137|160|179|221|254|259|269|312|305|310|291|304|338|292|298|300|311|349|303|297|314|298|273|297|289|281|339|279|294|289|267|307|303|276|299|268|306|323|302|311|320|296|295|306|300|306|313|279|317|312|301|344|312|295|320|295|342|312|301|304|308|395|337|343|321|320|342|348|325|299|309|326|266|307|296|294|304|314|305|314|328|288|413|299|284|308|290|310|305|307|316|301|345|297|298|296|294|302|322|364|299|293|349|320|333|316|318|314|294|297|334|319|285|330|323|317|317|316|323|312|293|304|239|349|310|278|320|285|284|285|341|285|306|307|336|312|346|314|309|318|287|309|309|281|309|277|292|304|295|289|307|276|306|317|283|255|308|286|324|286|288|291|282|261|308|337|317|309|203|288|282|284|275|231|268|215|206|158|155|68|42|55|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|28|88|139|125|156|185|226|236|235|268|285|301|306|291|249|310|313|319|278|305|290|313|295|273|269|299|296|359|329|301|292|294|318|335|307|305|311|289|313|361|296|296|359|294|288|364|322|323|268|306|315|323|322|274|328|188|298|304|298|348|289|339|290|323|299|287|307|267|300|307|309|313|317|263|306|300|318|312|293|299|303|290|300|334|321|303|304|311|318|301|307|302|353|286|332|319|321|296|229|306|314|303|299|218|312|320|331|279|325|284|305|298|285|295|317|303|301|302|324|310|321|303|331|289|276|303|386|289|296|307|298|315|298|310|318|311|350|283|321|322|306|296|314|295|366|284|289|293|300|303|301|258|308|326|371|324|308|295|303|290|288|285|286|313|270|289|322|256|291|346|270|296|286|275|281|284|249|232|235|179|167|126|52|43|37|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0");
        }
    }
}
